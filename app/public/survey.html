<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../../../favicon.ico">

    <title>Friend Finder Survey</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
    <style>*{text-align: center} 
    /* form{ display: inline-block} */
     .centered {
  display: block;
  margin-right: auto;
  margin-left: auto;}  
  input{margin:auto}  
  </style>
    <script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  </head>
  <body>
      
        <div class="modal-body" id="modalF">
          <div
            class="modal fade"
            id="myModal"
            tabindex="-1"
            role="dialog"
            aria-labelledby="myModalLabelF"
          >
            <div class="modal-dialog modal-lg" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h4 class="modal-title" id="myModalLabelF"></h4>
                  <button
                    type="button"
                    class="close"
                    data-dismiss="modal"
                    aria-label="Close"
                  >
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <div class="row">
                    <div class="col-md-12 modal_body_map">
                      <p id="modalFeedback"></p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
    <div class="container">
      
      <div class="jumbotron">
        <h1 class="display-3"><b>Friend Finder&nbsp;</b></h1>
        <p class="lead">Duty Calls, Find Yourself Some Squadmates.</p>
        <p><a id="find" class="btn btn-lg btn-success" href="/home" role="button">See all Soldiers</a></p>
      </div>

      <!-- This is the Form -->
      <div class="form">
        <form class="form-horizontal" >
          <fieldset>
          <legend>Let's find you a squad</legend>
          <div class="form-group">
            <label class="col control-label" for="textinput">Name</label>  
            <div class="col">
            <input id="name" name="textinput" type="text" placeholder="This is where your name should go" class="form-control input-md">
            </div>
          </div>
          <div class="form-group">
            <label class="col control-label" for="textinput">Photo Url</label>  
            <div class="col">
            <input id="photoUrl" name="textinput" type="text" placeholder="Url link here" class="form-control input-md">
            </div>
          </div>
          <h6>Select 5 to totally agree, 1 to disagree.</h4>
          <div class="form-group align-self-center">
            <label class="col control-label" for="1radios">I never leave a squadmate down.</label>
            <div class="col "> 
              <label class="radio-inline" for="1radios-0">
                <input type="radio" name="1radios" id="1radios-0" value="1" checked="checked">
                1
              </label> 
              <label class="radio-inline" for="1radios-1">
                <input type="radio" name="1radios" id="1radios-1" value="2">
                2
              </label> 
              <label class="radio-inline" for="1radios-2">
                <input type="radio" name="1radios" id="1radios-2" value="3">
                3
              </label> 
              <label class="radio-inline" for="1radios-3">
                <input type="radio" name="1radios" id="1radios-3" value="4">
                4
              </label>
              <label class="radio-inline" for="1radios-4">
                <input type="radio" name="1radios" id="1radios-4" value="5">
                5
              </label>
            </div>
          </div>
          <div class="form-group">
            <label class="col control-label" for="2radios">Let's skulk around the edges and let them take care of each other.</label>
            <div class="col"> 
              <label class="radio-inline" for="2radios-0">
                <input type="radio" name="2radios" id="2radios-0" value="1" checked="checked">
                1
              </label> 
              <label class="radio-inline" for="2radios-1">
                <input type="radio" name="2radios" id="2radios-1" value="2">
                2
              </label> 
              <label class="radio-inline" for="2radios-2">
                <input type="radio" name="2radios" id="2radios-2" value="3">
                3
              </label> 
              <label class="radio-inline" for="2radios-3">
                <input type="radio" name="2radios" id="2radios-3" value="4">
                4
              </label>
              <label class="radio-inline" for="2radios-4">
                <input type="radio" name="2radios" id="2radios-4" value="5">
                5
              </label>
            </div>
          </div>
          <div class="form-group">
            <label class="col control-label" for="3radios">I'm just here for the paint cans.</label>
            <div class="col"> 
              <label class="radio-inline" for="3radios-0">
                <input type="radio" name="3radios" id="3radios-0" value="1" checked="checked">
                1
              </label> 
              <label class="radio-inline" for="3radios-1">
                <input type="radio" name="3radios" id="3radios-1" value="2">
                2
              </label> 
              <label class="radio-inline" for="3radios-2">
                <input type="radio" name="3radios" id="3radios-2" value="3">
                3
              </label> 
              <label class="radio-inline" for="3radios-3">
                <input type="radio" name="3radios" id="3radios-3" value="4">
                4
              </label>
              <label class="radio-inline" for="3radios-4">
                <input type="radio" name="3radios" id="3radios-4" value="5">
                5
              </label>
            </div>
          </div>
          <div class="form-group">
            <label class="col control-label" for="4radios">It's more important to win than complete a challenge.</label>
            <div class="col"> 
              <label class="radio-inline" for="4radios-0">
                <input type="radio" name="4radios" id="4radios-0" value="1" checked="checked">
                1
              </label> 
              <label class="radio-inline" for="4radios-1">
                <input type="radio" name="4radios" id="4radios-1" value="2">
                2
              </label> 
              <label class="radio-inline" for="4radios-2">
                <input type="radio" name="4radios" id="4radios-2" value="3">
                3
              </label> 
              <label class="radio-inline" for="4radios-3">
                <input type="radio" name="4radios" id="4radios-3" value="4">
                4
              </label>
              <label class="radio-inline" for="4radios-4">
                <input type="radio" name="4radios" id="4radios-4" value="5">
                5
              </label>
            </div>
          </div>
          <div class="form-group">
            <label class="col control-label" for="5radios">Jump first, decide where to land later.</label>
            <div class="col"> 
              <label class="radio-inline" for="5radios-0">
                <input type="radio" name="5radios" id="5radios-0" value="1" checked="checked">
                1
              </label> 
              <label class="radio-inline" for="5radios-1">
                <input type="radio" name="5radios" id="5radios-1" value="2">
                2
              </label> 
              <label class="radio-inline" for="5radios-2">
                <input type="radio" name="5radios" id="5radios-2" value="3">
                3
              </label> 
              <label class="radio-inline" for="5radios-3">
                <input type="radio" name="5radios" id="5radios-3" value="4">
                4
              </label>
              <label class="radio-inline" for="5radios-4">
                <input type="radio" name="5radios" id="5radios-4" value="5">
                5
              </label>
            </div>
          </div>
          <div class="form-group">
            <label class="col control-label" for="6radios">I share gear-- but never my sniper rifle.</label>
            <div class="col"> 
              <label class="radio-inline" for="6radios-0">
                <input type="radio" name="6radios" id="6radios-0" value="1" checked="checked">
                1
              </label> 
              <label class="radio-inline" for="6radios-1">
                <input type="radio" name="6radios" id="6radios-1" value="2">
                2
              </label> 
              <label class="radio-inline" for="6radios-2">
                <input type="radio" name="6radios" id="6radios-2" value="3">
                3
              </label> 
              <label class="radio-inline" for="6radios-3">
                <input type="radio" name="6radios" id="6radios-3" value="4">
                4
              </label>
              <label class="radio-inline" for="6radios-4">
                <input type="radio" name="6radios" id="6radios-4" value="5">
                5
              </label>
            </div>
          </div>
          <div class="form-group">
            <label class="col control-label" for="7radios">It's better to go down in a blaze of glory.</label>
            <div class="col"> 
              <label class="radio-inline" for="7radios-0">
                <input type="radio" name="7radios" id="7radios-0" value="1" checked="checked">
                1
              </label> 
              <label class="radio-inline" for="7radios-1">
                <input type="radio" name="7radios" id="7radios-1" value="2">
                2
              </label> 
              <label class="radio-inline" for="7radios-2">
                <input type="radio" name="7radios" id="7radios-2" value="3">
                3
              </label> 
              <label class="radio-inline" for="7radios-3">
                <input type="radio" name="7radios" id="7radios-3" value="4">
                4
              </label>
              <label class="radio-inline" for="7radios-4">
                <input type="radio" name="7radios" id="7radios-4" value="5">
                5
              </label>
            </div>
          </div>
          <div class="form-group">
            <label class="col control-label" for="8radios">Let's take the chopper.</label>
            <div class="col"> 
              <label class="radio-inline" for="8radios-0">
                <input type="radio" name="8radios" id="8radios-0" value="1" checked="checked">
                1
              </label> 
              <label class="radio-inline" for="8radios-1">
                <input type="radio" name="8radios" id="8radios-1" value="2">
                2
              </label> 
              <label class="radio-inline" for="8radios-2">
                <input type="radio" name="8radios" id="8radios-2" value="3">
                3
              </label> 
              <label class="radio-inline" for="8radios-3">
                <input type="radio" name="8radios" id="8radios-3" value="4">
                4
              </label>
              <label class="radio-inline" for="8radios-4">
                <input type="radio" name="8radios" id="8radios-4" value="5">
                5
              </label>
            </div>
          </div>
          <div class="form-group">
            <label class="col control-label" for="9radios">We should hold the fort.</label>
            <div class="col"> 
              <label class="radio-inline" for="9radios-0">
                <input type="radio" name="9radios" id="9radios-0" value="1" checked="checked">
                1
              </label> 
              <label class="radio-inline" for="9radios-1">
                <input type="radio" name="9radios" id="9radios-1" value="2">
                2
              </label> 
              <label class="radio-inline" for="9radios-2">
                <input type="radio" name="9radios" id="9radios-2" value="3">
                3
              </label> 
              <label class="radio-inline" for="9radios-3">
                <input type="radio" name="9radios" id="9radios-3" value="4">
                4
              </label>
              <label class="radio-inline" for="9radios-4">
                <input type="radio" name="9radios" id="9radios-4" value="5">
                5
              </label>
            </div>
          </div>
          <div class="form-group">
            <label class="col control-label" for="10radios">Unit cohesion is a real thing.</label>
            <div class="col"> 
              <label class="radio-inline" for="10radios-0">
                <input type="radio" name="10radios" id="10radios-0" value="1" checked="checked">
                1
              </label> 
              <label class="radio-inline" for="10radios-1">
                <input type="radio" name="10radios" id="10radios-1" value="2">
                2
              </label> 
              <label class="radio-inline" for="10radios-2">
                <input type="radio" name="10radios" id="10radios-2" value="3">
                3
              </label> 
              <label class="radio-inline" for="10radios-3">
                <input type="radio" name="10radios" id="10radios-3" value="4">
                4
              </label>
              <label class="radio-inline" for="10radios-4">
                <input type="radio" name="10radios" id="10radios-4" value="5">
                5
              </label>
            </div>
          </div>
          <div class="form-group">
        <div class="col">
          <button type='submit' id="singlebutton" name="singlebutton" class="btn btn-primary">Find Your Best Match</button>
        </div>
      </div>
        </fieldset>
      </form>
      </div>
      <div class="friends">
        </div>
      <footer class="footer">
        <p>Â© 2019</p>
      </footer>

    </div> 
</body>
<script>
$("form").on("submit", (event)=>{
event.preventDefault()
scores=[]
// for loop to grab the inputs by name
for (var i = 1; i< 11; i++){
  scores.push($(`input[name=${i}radios]:checked`).val())
}

var newFriend = {
      name: $("#name").val().trim(),
      image: $("#photoUrl").val().trim(),
      scores: scores
    };

    // after i get the data's i'll hide the form and display the matches sorted by closest

  $.ajax({ url: "/api/friends", method: "POST" , data:newFriend}).then(function(res) {
      // because I have added the data property differential to sort the array, rather than res.redirect("/") 
      // to display frineds I simply hide the survey so that I can post the sorted friends here
      res.forEach(v=>{
        var friendList = $(".friends");
        var newFriend = $("<li class='list-group-item mt-4'>");
          newFriend.append(
          // $("<h2>").text("ID: " + newFriend[i].id),
          $("<h5>").text("Name: " + v.name),
          $("<h5>").text("Image link: " + v.image),
          $("<h5>").text(`Compatibility: ${100-v.differential*2.5}%`),
        );
        friendList.append(newFriend);})
      $(".form").hide()
      $("#myModal").modal("toggle")
      $("#modalFeedback").text(
      `You matched best with ${res[0].name}. You are ${100-res[0].differential*2.5}% compatible! Here is their image: ${res[0].image}. Get out there and earn that W!`
    );
    $("#myModalLabelF").text(`Your Best Match`);
    });
})
</script>
</html>